<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>offset demo</title>
  <style>
  p {
    margin-left: 10px;
  }
  </style>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>

<style type="text/css">
*{ margin:0px; padding:0; }
.box{ width:100%;
	left:0px;
	top:0px;
	width:100%;
	padding:20px 0px;
	z-index:0;
	border-bottom:1px solid #cccccc;
	transition:all 500ms ease;
	-moz-transition:all 500ms ease;
	-webkit-transition:all 500ms ease;
	-ms-transition:all 500ms ease;
	-o-transition:all 500ms ease;
	font-size:20px;
	text-align:center;
	background:rgb(77, 190, 255);

 }
.box.active{ /*background-color:yellow !important;*/ z-index:999; position:fixed;
	opacity:1;
	visibility:visible;
	-ms-animation-name: fadeInDown;
	-moz-animation-name: fadeInDown;
	-op-animation-name: fadeInDown;
	-webkit-animation-name: fadeInDown;
	animation-name: fadeInDown;
	-ms-animation-duration: 1s;
	-moz-animation-duration: 1s;
	-op-animation-duration: 1s;
	-webkit-animation-duration: 1s;
	animation-duration: 1s;
	-ms-animation-timing-function: linear;
	-moz-animation-timing-function: linear;
	-op-animation-timing-function: linear;
	-webkit-animation-timing-function: linear;
	animation-timing-function: linear;
	-ms-animation-iteration-count: 1;
	-moz-animation-iteration-count: 1;
	-op-animation-iteration-count: 1;
	-webkit-animation-iteration-count: 1;
	animation-iteration-count: 1;
}


@-webkit-keyframes fadeInDown {
  0% {
    opacity: 0;
    -webkit-transform: translateY(-20px);
    transform: translateY(-20px);
  }

  100% {
    opacity: 1;
    -webkit-transform: translateY(0);
    transform: translateY(0);
  }
}

@keyframes fadeInDown {
  0% {
    opacity: 0;
    -webkit-transform: translateY(-20px);
    -ms-transform: translateY(-20px);
    transform: translateY(-20px);
  }

  100% {
    opacity: 1;
    -webkit-transform: translateY(0);
    -ms-transform: translateY(0);
    transform: translateY(0);
  }
}

.fadeInDown {
  -webkit-animation-name: fadeInDown;
  animation-name: fadeInDown;
}


</style>
<div style="min-height:167px;">
<div class="upperbox" style="width:100%; height:80px; background:red;"></div>
<div class="box stickyheader">Block 1<br>subtext</div>
</div>

<div class="contnt" style="width:100%; height:1200px;"><img src="http://www.themezaa.com/html/pofo/images/image-8.jpg"></div>

 
<script>
/* stickyHeaderAnimate script start */
(function($) {
	"use strict";

	// sticky header function start ---
	function stickyHeaderAnimate() {
		var stickyheader=$('.stickyheader');
		var stickyclass="active";
    var upperHeader=$(".upperbox");

		if(stickyheader.length){
			var windowpos = $(window).scrollTop();
			//console.log("scroll position: "+ windowpos);
			var stickyheaderHeight = stickyheader.outerHeight();
			//console.log("stickyheaderHeight: "+ stickyheaderHeight);
			var upperHeaderOffset = upperHeader.outerHeight();
			//console.log("upperheaderOffset: "+ upperHeaderOffset);
			var elementOffset = stickyheader.offset().top;
			//console.log("Header Offset: "+ elementOffset);
			var currentElementOffset = (elementOffset - windowpos);
			//console.log("Current Header Offset: "+ currentElementOffset);
			var headerwithOffset = currentElementOffset + stickyheaderHeight;
			//console.log("total header height: "+ headerwithOffset);

			var contntOffset = $(".contnt").offset().top;
			//console.log("content offset: "+ contntOffset);

			if ( headerwithOffset <= 0 ) {
				stickyheader.addClass(stickyclass);
			}else if(windowpos <= upperHeaderOffset){
				stickyheader.removeClass(stickyclass);
			}
		}
	}
	// sticky header function closed ---

	// after document ready 
	stickyHeaderAnimate();

	// on scroll
	$(window).on('scroll', function() {
		stickyHeaderAnimate();
	});

})(window.jQuery);
/* stickyHeaderAnimate script ended */
</script>
 
</body>
</html>