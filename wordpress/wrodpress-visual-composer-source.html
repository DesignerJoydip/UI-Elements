/*-------------------- type of shortcode --------------------------------*/
self-closing shortcodes [hello]
Enclosing shortcodes -- [hello][/hello]
/*------------------------------------------------------------------------*/


/* -------------------- craete a basic shortcode -----------------------*/

1. create a theme-option.php file in theme folder.
2. link above file with functions.php using "require_once(get_template_directory().'/theme-option.php');"
3. In theme-option.php page create a function and add this function with shortcode wordpress hook:
function shortcode(){
    //echo "welcome";// high priority
    //for low priority
    return "<p>welcome</p>";
}
add_shortcode('hello','shortcode');
4. write in admin content section - >    [hello]

/*------------------------------------------------------------------------*/


/* ------------ create shortcode with multiple attributes ----------------*/
function shortcode($atts){
    extract(shortcode_atts(array(
        'color'=>'blue',
        'fontsize'=>'25px'
    ), $atts));
    return "<p style='color:".$color."; font-size:".$fontsize.";'>welcome</p>";
}
add_shortcode('hello','shortcode');

write in admin content section - > [hello color="red" fontsize="45px"]

note: a.. shortcode_atts(array(), $atts) this function create for dynamic the multiple attributes.
      b.. extract() convert all attributes in variables ( like $color, $fontsize).

/*------------------------------------------------------------------------*/


/*------------------- create Enclosing shortcodes ------------------------*/ 
function shortcode($atts, $content){
    extract(shortcode_atts(array(
        'color'=>'blue',
        'fontsize'=>'25px'
    ), $atts));
    return "<p style='color:".$color."; font-size:".$fontsize.";'>".$content."</p>";
}
add_shortcode('hello','shortcode');

write in admin content section - > [hello color="red" fontsize="45px"]Welcome to wordpress[/hello]

/*------------------------------------------------------------------------*/


/*------------------- create nested shortcode ----------------------------*/
look like: [hello color="red" fontsize="45px"]Welcome to wordpress [hellosub]with nested shortcode[/hellosub][/hello]
here "[hellosub]with nested shortcode[/hellosub]" is a nested shortcode.

add "$content = do_shortcode($content);" this code above return function in every shortcode function for create
nested shortcode.

function shortcode($atts, $content){
    extract(shortcode_atts(array(
        'color'=>'blue',
        'fontsize'=>'25px'
    ), $atts));
    $content = do_shortcode($content);
    return "<p style='color:".$color."; font-size:".$fontsize.";'>".$content."</p>";
}
add_shortcode('hello','shortcode');

function nested_shortcode($atts, $content){
    extract(shortcode_atts(array(
        'color'=>'blue',
        'fontsize'=>'25px'
    ), $atts));
    $content = do_shortcode($content);
    return "<p style='color:".$color."; font-size:".$fontsize.";'>".$content."</p>";
}

/*------------------------------------------------------------------------*/


/*------------------------- Support for widget ---------------------------*/

add_filter('widget_text','do_shortcode');

/*------------------------------------------------------------------------*/


/*--------------- create a tab and a basic addon in vc map ---------------*/
function integrateWithVCmap(){

vc_map(array(

'name'=>__('Section One','text-domain'),// key => value
'description'=>'This is Section one',
'base'=>'section_1_base',
'category'=>'Custom',
'icon'=>get_template_directory_uri().'/assets/images/vc-oddon-icon.png',
'params'=>array(),// *params* here we add code for input values from admin vc

));

}
add_action('vc_before_init','integrateWithVCmap');


// *params* --------------------------------
'params'=>array(
    array(
        'param_name'=>'section_1_title',
        'type'=>'textfield',
        'heading'=>'Section One Title',
        'value'=>'Placeholder',
    ),
    array(
        'param_name'=>'section_1_title_color',
        'type'=>'colorpicker',
        'heading'=>'Section One Title Color',
        'value'=>'Placeholder',
    ),
    array(
        'param_name'=>'section_1_description',
        'type'=>'textarea',
        'heading'=>'Section One Description',
        'value'=>'Placeholder',
    ),
    array(
        'param_name'=>'section_1_image',
        'type'=>'attach_image',
        'heading'=>'Section One Image',
        'value'=>'',
    ),
),


/*------------------------------------------------------------------------*/


/*------------------ add html design in vc map ---------------------------*/
function vc_section_1($attr){
    extract(
        shortcode_atts(array(),$attr) // *kayAndValue* here we add key and value for intact data with design 
    );
    ob_start();
?>
<div>
    <img src="" alt=''>
    <h1>Heading<!--<?php echo esc_html($kayAndValue); ?>--></h1>
    <div>Paragraph</div>
</div>
<?php
    return ob_get_clean();
}
add_shortcode('section_1_base','vc_section_1');


// *kayAndValue* ----------------------------------
extract(
shortcode_atts(array(
    'section_1_title'=>'Section one Title',
    'section_1_description'=>'Section one description',
    'section_1_title_color'=>'blue',
    'section_1_image'=>'Section one image',
),$attr)
);

/*------------------------------------------------------------------------*/


/*------------------------ create new addon full code ------------------------------*/
function integrateWithVCmap(){
    vc_map(array(
        'name'=>__('Section One','text-domain'),// key => value
        'description'=>'This is Section one',
        'base'=>'section_1_base',
        'category'=>'Custom',
        'icon'=>get_template_directory_uri().'/assets/images/vc-oddon-icon.png',
        'params'=>array(
        array(
            'param_name'=>'section_1_title',
            'type'=>'textfield',
            'heading'=>'Section One Title',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_1_title_color',
            'type'=>'colorpicker',
            'heading'=>'Section One Title Color',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_1_description',
            'type'=>'textarea',
            'heading'=>'Section One Description',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_1_image',
            'type'=>'attach_image',
            'heading'=>'Section One Image',
            'value'=>'',
        ),
        ),
    ));
}
add_action('vc_before_init','integrateWithVCmap');



function vc_section_1($attr){
extract(
    shortcode_atts(array(
        'section_1_title'=>'Section one Title',
        'section_1_description'=>'Section one description',
        'section_1_title_color'=>'',
        'section_1_image'=>'Section one image',
    ),$attr)
);
ob_start();
?>
<div>
    <?php
    $section_1_image_src = wp_get_attachment_image_src($section_1_image, "full");
    if($section_1_image_src){
        echo '<img src="'.esc_url($section_1_image_src[0]).'" alt="">';
    }else{
        echo '<img src="'.get_template_directory_uri().'/assets/images/vc-oddon-icon.png" alt="">';
    }
    ?>
    <h1 style="color:<?php echo $section_1_title_color; ?>">
        <?php echo esc_html($section_1_title); ?>
    </h1>
    <div>
        <?php echo esc_html($section_1_description); ?>
    </div>
</div>
<?php
    return ob_get_clean();
}
add_shortcode('section_1_base','vc_section_1');
/*------------------------------------------------------------------------*/


/*-------------------- create addons with tab ----------------------------*/
function integrateWithVCmap(){
vc_map(array(
    'name'=>__('Section Two','text-domain'),// key => value
    'description'=>'This is Section Two',
    'base'=>'section_2_base',
    'category'=>'Custom',
    'icon'=>get_template_directory_uri().'/assets/images/vc-oddon-icon.png',
    'params'=>array(
        array(
            'param_name'=>'section_2_title',
            'type'=>'textfield',
            'heading'=>'Section Two Title',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_2_title_color',
            'type'=>'colorpicker',
            'heading'=>'Section Two Title Color',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_2_description',
            'type'=>'textarea',
            'heading'=>'Section Two Description',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_2_image',
            'type'=>'attach_image',
            'heading'=>'Section Two Image',
            'value'=>'',
            'group'=>'Graphics',
        ),
        array(
            'param_name'=>'section_2_icon',
            'type'=>'iconpicker',
            'heading'=>'Section Two icon',
            'value'=>'',
            'group'=>'Graphics',
        ),
    ),
));
}
add_action('vc_before_init','integrateWithVCmap');


function vc_section_2($attr){
extract(
    shortcode_atts(array(
        'section_2_title'=>'Section Two Title',
        'section_2_description'=>'Section Two description',
        'section_2_title_color'=>'',
        'section_2_image'=>'Section Two image',
        'section_2_icon'=>'',
    ),$attr)
);
ob_start();
?>
<div>
    <i class="<?php echo esc_attr($section_2_icon); ?>"></i>
    <h1 style="color:<?php echo $section_2_title_color; ?>">
        <?php echo esc_html($section_2_title); ?>
    </h1>
    <div>
        <?php echo esc_html($section_2_description); ?>
    </div>
</div>
<?php
    return ob_get_clean();
}
add_shortcode('section_2_base','vc_section_2');
/*------------------------------------------------------------------------*/



/*------------------ create addons with image or icon option --------------*/
function integrateWithVCmap(){
    vc_map(array(

    'name'=>__('Section Three','text-domain'),// key => value
    'description'=>'This is Section Three',
    'base'=>'section_3_base',
    'category'=>'Custom',
    'icon'=>get_template_directory_uri().'/assets/images/vc-oddon-icon.png',
    'params'=>array(
        array(
            'param_name'=>'section_3_title',
            'type'=>'textfield',
            'heading'=>'Section Three Title',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_3_title_color',
            'type'=>'colorpicker',
            'heading'=>'Section Three Title Color',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_3_description',
            'type'=>'textarea',
            'heading'=>'Section Three Description',
            'value'=>'Placeholder',
        ),
        array(
            'param_name'=>'section_3_icon_image',
            'type'=>'dropdown',
            'heading'=>'Section Three icon & image',
            'group'=>'Graphics',
            'value'=>array(
                'Select a value'=>'',
                'Icon'=>'fontawesome',
                'Image'=>'custom',
            ),
        ),
        array(
            'param_name'=>'section_3_image',
            'type'=>'attach_image',
            'heading'=>'Section Three Image',
            'value'=>'',
            'group'=>'Graphics',
            'dependency'=>array(
                'element'=>'section_3_icon_image',
                'value'=>'custom',
            ),
        ),
        array(
            'param_name'=>'section_3_icon',
            'type'=>'iconpicker',
            'heading'=>'Section Three icon',
            'value'=>'',
            'group'=>'Graphics',
            'dependency'=>array(
                'element'=>'section_3_icon_image',
                'value'=>'fontawesome',
            ),
        ),
    ),

    ));
}
add_action('vc_before_init','integrateWithVCmap');

function vc_section_3($attr){
extract(
    shortcode_atts(array(
        'section_3_title'=>'Section Three Title',
        'section_3_description'=>'Section Three description',
        'section_3_title_color'=>'',
        'section_3_image'=>'Section Three image',
        'section_3_icon'=>'',
    ),$attr)
);
ob_start();
?>
<div>
    <?php
    $section_3_image_src = wp_get_attachment_image_src($section_3_image, "thumb");
    if($section_3_image_src){
        echo '<img src="'.esc_url($section_3_image_src[0]).'" alt="">';
    }
    ?>
    <i class="<?php echo esc_attr($section_3_icon); ?>"></i>
    <h1 style="color:<?php echo $section_3_title_color; ?>">
        <?php echo esc_html($section_3_title); ?>
    </h1>
    <div>
        <?php echo esc_html($section_3_description); ?>
    </div>
</div>
<?php
    return ob_get_clean();
}
add_shortcode('section_3_base','vc_section_3');
/*------------------------------------------------------------------------*/


/*---------------------- create addons with item groups ------------------*/
vc_map(array(
    'name'=>__('Section Three','text-domain'),// key => value
    'description'=>'This is Section Three',
    'base'=>'section_3_base',
    'category'=>'Custom',
    'icon'=>get_template_directory_uri().'/assets/images/vc-oddon-icon.png',
    'params'=>array(
        array(
            'param_name'=>'section_3_item_group',
            'heading'=>'Section Three Items',
            'type'=>'param_group',
            'params'=>array(

                array(
                'param_name'=>'section_3_title',
                'type'=>'textfield',
                'heading'=>'Section Three Title',
                'value'=>'Placeholder',
                ),

                // other elements .....

            ),
        ),
    ),
));

element section ------------
<?php
$section_3_key = vc_param_group_parse_atts($section_3_item_group);
foreach($section_3_key as $section_3_vlaue){
?>
<div>
    <?php
    $section_3_image_src = wp_get_attachment_image_src($section_3_vlaue['section_3_image'], "thumb");
    if($section_3_image_src){
        echo '<img src="'.esc_url($section_3_image_src[0]).'" alt="">';
    }
    ?>
    <i class="<?php echo esc_attr($section_3_vlaue['section_3_icon']); ?>"></i>
    <h1 style="color:<?php echo $section_3_title_color; ?>">
        <?php echo esc_html($section_3_vlaue['section_3_title']); ?>
    </h1>
    <div>
        <?php echo esc_html($section_3_vlaue['section_3_description']); ?>
    </div>
</div>
<?php } ?>


/*------------------------------------------------------------------------*/






